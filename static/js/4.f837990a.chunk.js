(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{317:function(t,e,s){"use strict";s.d(e,"a",(function(){return u}));var o=s(3),a=s(44),i=s(1),r=(s(0),s(10)),n=s(13),c=function(t){return{isAuth:t.auth.isAuth}};function u(t){return Object(r.b)(c)((function(e){e.isAuth;var s=Object(a.a)(e,["isAuth"]);return e.isAuth?Object(i.jsx)(t,Object(o.a)({},s)):Object(i.jsx)(n.a,{to:"/login"})}))}},330:function(t,e,s){t.exports={main_profile:"Profile_main_profile__2-65N"}},331:function(t,e,s){t.exports={post_block:"MyPost_post_block__1cDSp",post:"MyPost_post__1TfQL",post_text:"MyPost_post_text__3GQ1t"}},332:function(t,e,s){t.exports={posts_form:"MyPosts_posts_form__1CsEi",posts:"MyPosts_posts__3hM2t",posts_item:"MyPosts_posts_item__3rbhL",button_block:"MyPosts_button_block__awp2T",posts_textarea:"MyPosts_posts_textarea__3kZWx",posts_button:"MyPosts_posts_button__192L8",button_size:"MyPosts_button_size__3oqUW"}},333:function(t,e,s){t.exports={profile:"ProfileInfo_profile__1GIDg",profile_info:"ProfileInfo_profile_info__142Ew",info:"ProfileInfo_info__mPdgt",info_name:"ProfileInfo_info_name__3FNdF",contact:"ProfileInfo_contact__2ZooF",avatar:"ProfileInfo_avatar__2-RVm",button_block:"ProfileInfo_button_block__3QeFp",button_block_dialogs:"ProfileInfo_button_block_dialogs__1GmET"}},356:function(t,e,s){"use strict";s.r(e);var o=s(3),a=s(49),i=s(50),r=s(53),n=s(52),c=s(1),u=s(0),l=s.n(u),p=s(62),f=s(10),b=s(13),j=s(317),_=s(11),h=s(330),d=s.n(h),O=s(331),m=s.n(O),x=s(358),P=s(359),v=s(355),g=s(353),k=s(354),y=function(t){return Object(c.jsxs)("div",{className:m.a.post_block,children:[Object(c.jsxs)("div",{className:m.a.post,children:[Object(c.jsx)(x.a,{src:t.photo,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),Object(c.jsx)(P.a,{control:Object(c.jsx)(v.a,{icon:Object(c.jsx)(g.a,{}),checkedIcon:Object(c.jsx)(k.a,{}),name:"checkedH"}),label:t.like})]}),Object(c.jsx)("div",{className:m.a.post_text,children:t.message})]})},N=s(332),S=s.n(N),I=s(144),w=s(145),M=s(107),A=s(26),C=s(19),D=Object(M.a)(40),F=l.a.memo((function(t){var e=t.posts,s=t.addPostAC,o=t.isAuth,a=t.photo,i=e.map((function(t){return Object(c.jsx)(y,{id:t.id,message:t.message,like:t.like,photo:a},t.id)}));console.log("photo",a);return o?Object(c.jsxs)("div",{className:S.a.posts,children:[Object(c.jsx)(T,{onSubmit:function(t){s(t.newPostText)}}),Object(c.jsx)("div",{className:S.a.posts_item,children:i})]}):Object(c.jsx)(b.a,{to:"/login"})})),T=Object(w.a)({form:"newPostText"})((function(t){return Object(c.jsx)("form",{onSubmit:t.handleSubmit,children:Object(c.jsxs)("div",{className:S.a.posts_form,children:[Object(c.jsx)(I.a,{component:A.b,name:"newPostText",placeholder:"Empty",className:S.a.posts_textarea,validate:[M.b,D]}),Object(c.jsx)("div",{className:S.a.button_block,children:Object(c.jsx)(C.a,{style:S.a.button_size,children:"Add post"})})]})})})),U=F,z=Object(f.b)((function(t){var e;return{posts:t.profilePage.posts,isAuth:t.auth.isAuth,photo:null===(e=t.profilePage.profile)||void 0===e?void 0:e.photos.small}}),{addPostAC:p.a})(U),E=s(81),G=s(333),L=s.n(G),Q=s(43),J=s(84),W=function(t){var e=Object(u.useState)(!1),s=Object(E.a)(e,2),o=s[0],a=s[1],i=Object(u.useState)(t.status),r=Object(E.a)(i,2),n=r[0],l=r[1];return Object(u.useEffect)((function(){l(t.status)}),[t.status]),Object(c.jsx)("div",{children:o?Object(c.jsx)("div",{children:Object(c.jsx)("input",{autoFocus:!0,onBlur:function(){a(!o),t.updateStatus(n)},value:n,onChange:function(t){l(t.target?t.target.value:"")}})}):Object(c.jsx)("div",{children:Object(c.jsx)("span",{onDoubleClick:function(){return a(!o)},children:t.status||"No status"})})})},Z=s(18),q=s(143),B=s(82),H=s.n(B),R=function(t){t.isOwner;var e=t.profile,s=t.status,o=t.updateStatus,a=(t.savePhoto,t.updateProfile,Object(u.useState)(!1)),i=Object(E.a)(a,2);i[0],i[1];return e?Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:L.a.profile,children:Object(c.jsxs)("div",{className:L.a.profile_info,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:L.a.avatar,children:Object(c.jsx)("img",{src:e.photos.large||J.a,alt:"user avatar",width:"300",height:"300"})}),Object(c.jsx)("div",{children:Object(c.jsx)(W,{status:s,updateStatus:o})}),Object(c.jsxs)("div",{className:L.a.button_block,children:[Object(c.jsx)(Z.b,{className:H.a.button+" "+L.a.button_block_dialogs,to:"/messages",children:"Dialog"}),Object(c.jsx)(C.a,{children:"Follow"})]})]}),Object(c.jsx)(q.a,{profile:e,contact:e.contacts})]})})}):Object(c.jsx)(Q.a,{})},V=function(t){var e=t.isOwner,s=t.profile,o=t.status,a=t.updateStatus,i=t.savePhoto,r=t.updateProfile,n=t.refreshProfile;return Object(c.jsxs)("main",{className:d.a.main_profile,children:[Object(c.jsx)(R,{isOwner:e,profile:s,status:o,updateStatus:a,savePhoto:i,updateProfile:r,refreshProfile:n}),Object(c.jsx)(z,{})]})},K=function(t){Object(r.a)(s,t);var e=Object(n.a)(s);function s(){return Object(a.a)(this,s),e.apply(this,arguments)}return Object(i.a)(s,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(c.jsx)(V,Object(o.a)(Object(o.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,updateProfile:this.props.updateProfile,refreshProfile:this.refreshProfile}))}}]),s}(l.a.Component);e.default=Object(_.d)(b.f,j.a,Object(f.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.id}}),{getUserProfile:p.c,getStatus:p.b,updateStatus:p.g,savePhoto:p.e,updateProfile:p.f}))(K)}}]);
//# sourceMappingURL=4.f837990a.chunk.js.map