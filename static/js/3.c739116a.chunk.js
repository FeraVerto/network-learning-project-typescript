(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{335:function(t,e,s){"use strict";s.d(e,"a",(function(){return u}));var o=s(5),a=s(67),r=s(1),i=(s(0),s(13)),n=s(12),c=function(t){return{isAuth:t.auth.isAuth}};function u(t){return Object(i.b)(c)((function(e){e.isAuth;var s=Object(a.a)(e,["isAuth"]);return e.isAuth?Object(r.jsx)(t,Object(o.a)({},s)):Object(r.jsx)(n.a,{to:"/login"})}))}},340:function(t,e,s){t.exports={main_profile:"Profile_main_profile__2-65N"}},341:function(t,e,s){t.exports={post_block:"MyPost_post_block__1cDSp",post:"MyPost_post__1TfQL",post_text:"MyPost_post_text__3GQ1t"}},342:function(t,e,s){t.exports={posts_forms:"MyPosts_posts_forms__3_KYX",posts:"MyPosts_posts__3hM2t",posts_item:"MyPosts_posts_item__3rbhL",button_block:"MyPosts_button_block__awp2T",posts_textarea:"MyPosts_posts_textarea__3kZWx",posts_button:"MyPosts_posts_button__192L8"}},343:function(t,e,s){t.exports={profile:"ProfileInfo_profile__1GIDg",profile_info:"ProfileInfo_profile_info__142Ew",info:"ProfileInfo_info__mPdgt",info_name:"ProfileInfo_info_name__3FNdF",contact:"ProfileInfo_contact__2ZooF",button_block:"ProfileInfo_button_block__3QeFp",button:"ProfileInfo_button__WeC7y",background:"ProfileInfo_background__31HLB",avatar:"ProfileInfo_avatar__2-RVm"}},352:function(t,e,s){"use strict";s.r(e);var o=s(5),a=s(50),r=s(51),i=s(54),n=s(53),c=s(1),u=s(0),l=s.n(u),p=s(63),f=s(13),j=s(12),b=s(335),h=s(11),d=s(340),_=s.n(d),O=s(341),m=s.n(O),x=s(344),P=s(355),v=s(353),g=s(350),k=s(351),y=function(t){return Object(c.jsxs)("div",{className:m.a.post_block,children:[Object(c.jsxs)("div",{className:m.a.post,children:[Object(c.jsx)(x.a,{src:t.photo,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),Object(c.jsx)(P.a,{control:Object(c.jsx)(v.a,{icon:Object(c.jsx)(g.a,{}),checkedIcon:Object(c.jsx)(k.a,{}),name:"checkedH"}),label:t.like})]}),Object(c.jsx)("div",{className:m.a.post_text,children:t.message})]})},N=s(342),I=s.n(N),S=s(145),w=s(146),A=s(55),M=s(24),C=(Object(A.a)(10),l.a.memo((function(t){var e=t.posts,s=t.addPostAC,o=t.isAuth,a=t.photo,r=e.map((function(t){return Object(c.jsx)(y,{id:t.id,message:t.message,like:t.like,photo:a},t.id)}));console.log("photo",a);return o?Object(c.jsxs)("div",{className:I.a.posts,children:[Object(c.jsx)(D,{onSubmit:function(t){s(t.newPostText)}}),Object(c.jsx)("div",{className:I.a.posts_item,children:r})]}):Object(c.jsx)(j.a,{to:"/login"})}))),D=Object(w.a)({form:"newPostText"})((function(t){return Object(c.jsx)("form",{onSubmit:t.handleSubmit,children:Object(c.jsxs)("div",{className:I.a.posts_form,children:[Object(c.jsx)(S.a,{component:M.b,name:"newPostText",placeholder:"Empty",className:I.a.posts_textarea}),Object(c.jsx)("div",{className:I.a.button_block,children:Object(c.jsx)("button",{className:I.a.posts_button,children:"Add post"})})]})})})),F=C,T=Object(f.b)((function(t){var e;return{posts:t.profilePage.posts,isAuth:t.auth.isAuth,photo:null===(e=t.profilePage.profile)||void 0===e?void 0:e.photos.small}}),{addPostAC:p.a})(F),U=s(84),L=s(343),E=s.n(L),Q=s(43),z=s(52),B=function(t){var e=Object(u.useState)(!1),s=Object(U.a)(e,2),o=s[0],a=s[1],r=Object(u.useState)(t.status),i=Object(U.a)(r,2),n=i[0],l=i[1];return Object(u.useEffect)((function(){l(t.status)}),[t.status]),Object(c.jsx)("div",{children:o?Object(c.jsx)("div",{children:Object(c.jsx)("input",{autoFocus:!0,onBlur:function(){a(!o),t.updateStatus(n)},value:n,onChange:function(t){l(t.target?t.target.value:"")}})}):Object(c.jsx)("div",{children:Object(c.jsx)("span",{onDoubleClick:function(){return a(!o)},children:t.status||"No status"})})})},G=s(20),H=s(144),J=function(t){t.isOwner;var e=t.profile,s=t.status,o=t.updateStatus,a=(t.savePhoto,t.updateProfile,Object(u.useState)(!1)),r=Object(U.a)(a,2);r[0],r[1];return e?Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:E.a.profile,children:Object(c.jsxs)("div",{className:E.a.profile_info,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:E.a.avatar,children:Object(c.jsx)("img",{src:e.photos.large||z.a,alt:"user avatar",width:"300",height:"300"})}),Object(c.jsx)("div",{children:Object(c.jsx)(B,{status:s,updateStatus:o})}),Object(c.jsxs)("div",{className:E.a.button_block,children:[Object(c.jsx)("button",{className:E.a.button,children:Object(c.jsx)(G.b,{to:"/messages",children:"Dialog"})}),Object(c.jsx)("button",{className:E.a.button,children:"Follow"})]})]}),Object(c.jsx)(H.a,{profile:e,contact:e.contacts})]})})}):Object(c.jsx)(Q.a,{})},W=function(t){var e=t.isOwner,s=t.profile,o=t.status,a=t.updateStatus,r=t.savePhoto,i=t.updateProfile,n=t.refreshProfile;return Object(c.jsxs)("main",{className:_.a.main_profile,children:[Object(c.jsx)(J,{isOwner:e,profile:s,status:o,updateStatus:a,savePhoto:r,updateProfile:i,refreshProfile:n}),Object(c.jsx)(T,{})]})},Z=function(t){Object(i.a)(s,t);var e=Object(n.a)(s);function s(){return Object(a.a)(this,s),e.apply(this,arguments)}return Object(r.a)(s,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(c.jsx)(W,Object(o.a)(Object(o.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,updateProfile:this.props.updateProfile,refreshProfile:this.refreshProfile}))}}]),s}(l.a.Component);e.default=Object(h.d)(j.f,b.a,Object(f.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.id}}),{getUserProfile:p.c,getStatus:p.b,updateStatus:p.g,savePhoto:p.e,updateProfile:p.f}))(Z)}}]);
//# sourceMappingURL=3.c739116a.chunk.js.map